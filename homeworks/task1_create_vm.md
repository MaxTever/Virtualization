- Создать виртуальную машину  
- * Как можно создать роли producer и consumer  на виртуальной машине?  
	- Producer – read+write доступ к папке content  
	- Consumer – read+execute доступ к папке content  
-  * Создайте VM через VMWare/Hyper-V и  реализуйте раздельный доступ для ролей


### Создание виртуальной машины 

Чтобы создать виртуальную машину, необходимо открыть Диспетчер Hyper-V.

![Диспетчер Hyper-V](img/src_20241210025847.png)

Далее выбираем "Создать виртуальную машину".

![Создать виртуальную машину](img/Pasted_image_20241210030011.png)

![Создать виртуальную машину](img/Pasted_image_20241210030106.png)

Затем задаем имя виртуальной машине "Ubuntu", также можно выбрать место сохранения, я оставил по умолчанию.

![Задаем имя виртуальной машине](img/Pasted_image_20241210030318.png)

После этого необходимо выбрать поколение.

![Выбор поколения](img/Pasted_image_20241210030402.png)

Указываем необходимый размер памяти, я указал в два раза больше, чем по умолчанию.

![Указываем размер памяти](img/Pasted_image_20241210030620.png)

Далее идет настройка сети, пока оставлю по умолчанию (можно поменять потом).

![Настройка сети](img/Pasted_image_20241210031812.png)

Затем необходимо подключить диск.

![Подключение диска](img/Pasted_image_20241210031752.png)

Далее понадобится ISO образ, для этого необходимо перейти на оф. сайт и скачать его.

![Скачивание ISO образа](img/Pasted_image_20241210032045.png)

После скачивания переходим в Диспетчер Hyper-V и выбираем установку с загрузочного диска, выбираем только что скачанный ISO-образ.

![Установка с загрузочного диска](img/Pasted_image_20241210033701.png)

Затем мы видим, что наша виртуальная машина создалась, чтобы ее запустить, нужно нажать "Пуск".

![Запуск виртуальной машины](img/Pasted_image_20241210033920.png)

Виртуальная машина запустилась, далее жмем "Подключить".

![Подключение к виртуальной машине](img/Pasted_image_20241210034109.png)

Далее устанавливаем Ubuntu.

![Установка Ubuntu](img/Pasted_image_20241210034649.png)

![Установка Ubuntu](img/Pasted_image_20241210034907.png)

![Установка Ubuntu](img/Pasted_image_20241210035134.png)

Выбираем интерактивную установку.

![Интерактивная установка](img/Pasted_image_20241210035219.png)

Далее стандартная установка.

![Стандартная установка](img/Pasted_image_20241210035247.png)

![Стандартная установка](img/Pasted_image_20241210035343.png)

![Стандартная установка](img/Pasted_image_20241210035827.png)

![Стандартная установка](img/Pasted_image_20241210035958.png)

Все установилось.

![Установка завершена](img/Pasted_image_20241210041214.png)


### Реализация раздельного доступа для ролей 

Открываем терминал.

![Открываем терминал](img/Pasted_image_20241210041756.png)

Создаем папку.

![Создаем папку](img/Pasted_image_20241210042216.png)

Чтобы создать роли Consumer и Producer, нам нужно создать две группы с помощью команды `sudo groupadd`.

![Создаем группы](img/Pasted_image_20241210043053.png)

Далее добавляем `producer_user` с помощью команды `sudo adduser producer_user`.

![Добавляем producer_user](img/Pasted_image_20241210044409.png)

Добавляем `consumer_user` с помощью команды `sudo adduser consumer_user`.

![Добавляем consumer_user](img/Pasted_image_20241210044615.png)

Добавляем пользователей в свои группы с помощью команды `sudo usermod -aG producer producer_user` и `sudo usermod -aG consumer consumer_user`.

![Добавляем пользователей в группы](img/Pasted_image_20241210045025.png)

Далее необходимо изменить владельца директории `content` для этого будет использоваться команда `sudo chgrp -R producer /home/content`.

![Изменяем владельца директории](img/Pasted_image_20241210052703.png)

Далее необходимо настроить права для группы `producer` для этого используем команду `sudo chmod -R 760 /home/content`.

![Настраиваем права для группы producer](img/Pasted_image_20241210053251.png)

Далее необходимо настроить права для группы `consumer` для этого будет использоваться команда `sudo setfacl -R -m g:consumer:rx /home/content`.

![Настраиваем права для группы consumer](img/Pasted_image_20241210054207.png)

В результате можем проверить права для данной директории с помощью команды `getfacl /home/content`.

![Проверяем права](img/Pasted_image_20241210055311.png)

## Итоги

1. Роли на виртуальной машине создаются за счет групп, для создания группы используется команда `sudo groupadd`.
2. Пользователи создаются командой `sudo adduser producer_user`.
3. Для добавления пользователя в группу используется команда `sudo usermod -aG producer producer_user`.
4. Для настройки прав используется команда `chmod`.
5. Для настройки прав для группы, которая не является владельцем директории, используется команда `setfacl`.