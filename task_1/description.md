# Задание 1

- Создать виртуальную машину  
- * Как можно создать роли producer и consumer  на виртуальной машине?  
	- Producer – read+write доступ к папке content  
	- Consumer – read+execute доступ к папке content  
-  * Создайте VM через VMWare/Hyper-V и  реализуйте раздельный доступ для ролей


### Создание виртуальной машины 

Чтобы создать виртуальную машину, необходимо открыть Диспетчер Hyper-V.

![Диспетчер Hyper-V](img/p1.png)

Далее выбираем "Создать виртуальную машину".

![Создать виртуальную машину](img/p2.png)

![Создать виртуальную машину](img/p3.png)

Затем задаем имя виртуальной машине "Ubuntu", также можно выбрать место сохранения, я оставил по умолчанию.

![Задаем имя виртуальной машине](img/p4.png)

После этого необходимо выбрать поколение.

![Выбор поколения](img/p5.png)

Указываем необходимый размер памяти, я указал в два раза больше, чем по умолчанию.

![Указываем размер памяти](img/p6.png)

Далее идет настройка сети, пока оставлю по умолчанию (можно поменять потом или сразу поменять на Default Switch).

![Настройка сети](img/p7.png)

Затем необходимо подключить диск.

![Подключение диска](img/p8.png)

Далее понадобится ISO образ, для этого необходимо перейти на оф. сайт и скачать его.

![Скачивание ISO образа](img/p9.png)

После скачивания переходим в Диспетчер Hyper-V и выбираем установку с загрузочного диска, выбираем только что скачанный ISO-образ.

![Установка с загрузочного диска](img/p10.png)

Затем мы видим, что наша виртуальная машина создалась, чтобы ее запустить, нужно нажать "Пуск".

![Запуск виртуальной машины](img/p11.png)

Виртуальная машина запустилась, далее жмем "Подключить".

![Подключение к виртуальной машине](img/p12.png)

Далее устанавливаем Ubuntu.

![Установка Ubuntu](img/p13.png)

![Установка Ubuntu](img/p14.png)

![Установка Ubuntu](img/p15.png)

Выбираем интерактивную установку.

![Интерактивная установка](img/p16.png)

Далее стандартная установка.

![Стандартная установка](img/p17.png)

![Стандартная установка](img/p18.png)

![Стандартная установка](img/p19.png)

![Стандартная установка](img/p20.png)

Все установилось.

![Установка завершена](img/p21.png)


### Реализация раздельного доступа для ролей 

Открываем терминал.

![Открываем терминал](img/p22.png)

Создаем папку.

![Создаем папку](img/p23.png)

Чтобы создать роли Consumer и Producer, нам нужно создать две группы с помощью команды `sudo groupadd`.

![Создаем группы](img/p24.png)

Далее добавляем `producer_user` с помощью команды `sudo adduser producer_user`.

![Добавляем producer_user](img/p25.png)

Добавляем `consumer_user` с помощью команды `sudo adduser consumer_user`.

![Добавляем consumer_user](img/p26.png)

Добавляем пользователей в свои группы с помощью команды `sudo usermod -aG producer producer_user` и `sudo usermod -aG consumer consumer_user`.

![Добавляем пользователей в группы](img/p27.png)

Далее необходимо изменить владельца директории `content` для этого будет использоваться команда `sudo chgrp -R producer /home/content`. 
Флаг -R применяет группу владельца рекурсивно, то есть будет применяться к файлам и подкаталогам в данной директории. 

![Изменяем владельца директории](img/p28.png)

Далее необходимо настроить права для группы `producer` для этого используем команду `sudo chmod -R 760 /home/content`. Можно вместо числовых значений задавать права с помощью текстовых флагов rwx.

![Настраиваем права для группы producer](img/p29.png)

Далее необходимо настроить права для группы `consumer` для этого будет использоваться команда `sudo setfacl -R -m g:consumer:rx /home/content`.
`setfacl` позволяет назанчать права для группы которая не является владельцем директории.

![Настраиваем права для группы consumer](img/p30.png)

В результате можем проверить права для данной директории с помощью команды `getfacl /home/content`.

![Проверяем права](img/p31.png)

## Итоги

1. Роли на виртуальной машине создаются за счет групп, для создания группы используется команда `sudo groupadd`.
2. Пользователи создаются командой `sudo adduser producer_user`.
3. Для добавления пользователя в группу используется команда `sudo usermod -aG producer producer_user`.
4. Для настройки прав используется команда `chmod`.
5. Для настройки прав для группы, которая не является владельцем директории, используется команда `setfacl`.